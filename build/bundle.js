var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function p(){return u(" ")}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}function k(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function y(t,e,n){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function v(t,e,n){t.classList[n?"add":"remove"](e)}let j;function b(t){j=t}function $(t){(function(){if(!j)throw new Error("Function called outside component initialization");return j})().$$.on_mount.push(t)}const w=[],D=[];let x=[];const I=[],P=Promise.resolve();let E=!1;function S(t){x.push(t)}const N=new Set;let L=0;function O(){if(0!==L)return;const t=j;do{try{for(;L<w.length;){const t=w[L];L++,b(t),T(t.$$)}}catch(t){throw w.length=0,L=0,t}for(b(null),w.length=0,L=0;D.length;)D.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];N.has(e)||(N.add(e),e())}x.length=0}while(w.length);for(;I.length;)I.pop()();E=!1,N.clear(),b(t)}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const C=new Set;function A(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];x.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),x=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function M(t,e){-1===t.$$.dirty[0]&&(w.push(t),E||(E=!0,P.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(c,r,l,s,d,u,p,f=[-1]){const h=j;b(c);const g=c.$$={fragment:null,ctx:[],props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(h?h.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||h.$$.root};p&&p(g.root);let _=!1;if(g.ctx=l?l(c,r.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return g.ctx&&d(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),_&&M(c,t)),e})):[],g.update(),_=!0,o(g.before_update),g.fragment=!!s&&s(g.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);g.fragment&&g.fragment.l(t),t.forEach(a)}else g.fragment&&g.fragment.c();r.intro&&((m=c.$$.fragment)&&m.i&&(C.delete(m),m.i(k))),function(t,n,c,r){const{fragment:l,after_update:a}=t.$$;l&&l.m(n,c),r||S((()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(S)}(c,r.target,r.anchor,r.customElement),O()}var m,k;b(h)}class z{$destroy(){A(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(t,e,n){const o=t.slice();return o[60]=e[n],o}function G(t,e,n){const o=t.slice();return o[63]=e[n],o[65]=n,o}function J(t,e,n){const o=t.slice();return o[66]=e[n],o}function W(t,e,n){const o=t.slice();return o[69]=e[n],o}function q(t,e,n){const o=t.slice();return o[60]=e[n],o}function B(t,e,n){const o=t.slice();return o[60]=e[n],o}function H(t,e,n){const o=t.slice();return o[63]=e[n],o}function R(t,e,n){const o=t.slice();return o[66]=e[n],o}function F(t,e,n){const o=t.slice();return o[80]=e[n],o[82]=n,o}function Z(e){let n,o,i;return{c(){n=d("button"),n.textContent="Login"},m(t,c){l(t,n,c),o||(i=f(n,"click",e[13]),o=!0)},p:t,d(t){t&&a(n),o=!1,i()}}}function V(e){let n,o,i;return{c(){n=d("button"),n.textContent="Logout"},m(t,c){l(t,n,c),o||(i=f(n,"click",e[14]),o=!0)},p:t,d(t){t&&a(n),o=!1,i()}}}function Y(t){let e,n,i,c,g,m,k,y,v,j,b,$,w,D,x=t[5].createProject+"",I=t[5].existingProjects+"",P="Logged in"===t[1]&&null!==t[2]&&Q(t),E=t[9],S=[];for(let e=0;e<E.length;e+=1)S[e]=nt(B(t,E,e));return{c(){e=d("button"),e.textContent="Initialize Database",n=p(),i=d("button"),i.textContent="Fetch Data",c=p(),g=d("h2"),m=u(x),k=p(),P&&P.c(),y=p(),v=d("h2"),j=u(I),b=p(),$=d("div");for(let t=0;t<S.length;t+=1)S[t].c();h($,"class","project-list")},m(o,a){l(o,e,a),l(o,n,a),l(o,i,a),l(o,c,a),l(o,g,a),r(g,m),l(o,k,a),P&&P.m(o,a),l(o,y,a),l(o,v,a),r(v,j),l(o,b,a),l(o,$,a);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m($,null);w||(D=[f(e,"click",ft),f(i,"click",t[15])],w=!0)},p(t,e){if(32&e[0]&&x!==(x=t[5].createProject+"")&&_(m,x),"Logged in"===t[1]&&null!==t[2]?P?P.p(t,e):(P=Q(t),P.c(),P.m(y.parentNode,y)):P&&(P.d(1),P=null),32&e[0]&&I!==(I=t[5].existingProjects+"")&&_(j,I),44040736&e[0]){let n;for(E=t[9],n=0;n<E.length;n+=1){const o=B(t,E,n);S[n]?S[n].p(o,e):(S[n]=nt(o),S[n].c(),S[n].m($,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=E.length}},d(t){t&&a(e),t&&a(n),t&&a(i),t&&a(c),t&&a(g),t&&a(k),P&&P.d(t),t&&a(y),t&&a(v),t&&a(b),t&&a($),s(S,t),w=!1,o(D)}}}function Q(t){let e,n,i,c,s,k,y,v,j,b,$,w,D,x,I,P,E,S,N,L=t[5].addProject+"";return{c(){e=d("input"),i=p(),c=d("input"),k=p(),y=d("input"),j=p(),b=d("input"),w=p(),D=d("input"),I=p(),P=d("button"),E=u(L),h(e,"type","text"),h(e,"placeholder",n=t[5].projectName),h(e,"maxlength","100"),h(c,"type","text"),h(c,"placeholder",s=t[5].projectDescription),h(c,"maxlength","200"),h(y,"type","number"),h(y,"placeholder",v=t[5].projectKPI),h(y,"min","0"),h(b,"type","datetime-local"),h(b,"placeholder",$=t[5].projectDueDate),h(D,"type","number"),h(D,"placeholder",x=t[5].projectDifficulty),h(D,"min","1"),h(D,"max","5")},m(n,o){l(n,e,o),m(e,t[6].name),l(n,i,o),l(n,c,o),m(c,t[6].description),l(n,k,o),l(n,y,o),m(y,t[6].kpi),l(n,j,o),l(n,b,o),m(b,t[6].due_date),l(n,w,o),l(n,D,o),m(D,t[6].difficulty),l(n,I,o),l(n,P,o),r(P,E),S||(N=[f(e,"input",t[30]),f(c,"input",t[31]),f(y,"input",t[32]),f(b,"input",t[33]),f(D,"input",t[34]),f(P,"click",t[16])],S=!0)},p(t,o){32&o[0]&&n!==(n=t[5].projectName)&&h(e,"placeholder",n),64&o[0]&&e.value!==t[6].name&&m(e,t[6].name),32&o[0]&&s!==(s=t[5].projectDescription)&&h(c,"placeholder",s),64&o[0]&&c.value!==t[6].description&&m(c,t[6].description),32&o[0]&&v!==(v=t[5].projectKPI)&&h(y,"placeholder",v),64&o[0]&&g(y.value)!==t[6].kpi&&m(y,t[6].kpi),32&o[0]&&$!==($=t[5].projectDueDate)&&h(b,"placeholder",$),64&o[0]&&m(b,t[6].due_date),32&o[0]&&x!==(x=t[5].projectDifficulty)&&h(D,"placeholder",x),64&o[0]&&g(D.value)!==t[6].difficulty&&m(D,t[6].difficulty),32&o[0]&&L!==(L=t[5].addProject+"")&&_(E,L)},d(t){t&&a(e),t&&a(i),t&&a(c),t&&a(k),t&&a(y),t&&a(j),t&&a(b),t&&a(w),t&&a(D),t&&a(I),t&&a(P),S=!1,o(N)}}}function X(t){let e,n,o,i,c=t[21](t[60])>=10*t[82]?"●":"○";return{c(){e=d("span"),n=u(c),o=p(),h(e,"class",i=t[21](t[60])>=10*t[82]?"filled":"")},m(t,i){l(t,e,i),r(e,n),r(e,o)},p(t,o){512&o[0]&&c!==(c=t[21](t[60])>=10*t[82]?"●":"○")&&_(n,c),512&o[0]&&i!==(i=t[21](t[60])>=10*t[82]?"filled":"")&&h(e,"class",i)},d(t){t&&a(e)}}}function tt(t){let e,n,o,i,c=t[5][t[66]]+"",s=t[63][`${t[66]}_description`]+"";return{c(){e=d("span"),n=u(c),o=u(": "),i=u(s),h(e,"class","svelte-kgturn"),v(e,"done",t[63][`${t[66]}_done`])},m(t,c){l(t,e,c),r(e,n),r(e,o),r(e,i)},p(t,o){32&o[0]&&c!==(c=t[5][t[66]]+"")&&_(n,c),512&o[0]&&s!==(s=t[63][`${t[66]}_description`]+"")&&_(i,s),512&o[0]&&v(e,"done",t[63][`${t[66]}_done`])},d(t){t&&a(e)}}}function et(t){let e,n,o=["plan","do","check","act"],i=[];for(let e=0;e<4;e+=1)i[e]=tt(R(t,o,e));return{c(){e=d("div");for(let t=0;t<4;t+=1)i[t].c();n=p(),h(e,"class","pack-summary")},m(t,o){l(t,e,o);for(let t=0;t<4;t+=1)i[t]&&i[t].m(e,null);r(e,n)},p(t,c){if(544&c[0]){let r;for(o=["plan","do","check","act"],r=0;r<4;r+=1){const l=R(t,o,r);i[r]?i[r].p(l,c):(i[r]=tt(l),i[r].c(),i[r].m(e,n))}for(;r<4;r+=1)i[r].d(1)}},d(t){t&&a(e),s(i,t)}}}function nt(t){let e,n,o,i,c,g,m,y,v,j,b,$,w,D,x,I,P,E,S,N,L,O,T,C,A,M,U,z,K,G,J,W,q,B,R,Z,V=t[60].name+"",Y=t[60].user_id+"",Q=t[60].description+"",tt=t[60].kpi+"",nt="★".repeat(t[60].difficulty)+"",ot=t[23](t[60].due_date)+"",it=t[21](t[60])+"",ct=t[5].packsSummary+"",rt=t[5].delete+"",lt=Array(10),at=[];for(let e=0;e<lt.length;e+=1)at[e]=X(F(t,lt,e));let st=t[60].packs,dt=[];for(let e=0;e<st.length;e+=1)dt[e]=et(H(t,st,e));function ut(){return t[35](t[60])}return{c(){e=d("div"),n=d("h3"),o=u(V),i=u(": user id: "),c=u(Y),g=p(),m=d("p"),y=u(Q),v=p(),j=d("p"),b=u("KPI: "),$=u(tt),w=p(),D=d("p"),x=u("Difficulty: "),I=d("span"),P=u(nt),E=p(),S=d("p"),N=u("Due Date: "),L=u(ot),O=p(),T=d("div"),C=u(it),A=u("%\n                    ");for(let t=0;t<at.length;t+=1)at[t].c();M=p(),U=d("div"),z=d("h4"),K=u(ct),G=p();for(let t=0;t<dt.length;t+=1)dt[t].c();J=p(),W=d("button"),q=u(rt),B=p(),h(I,"class","stars svelte-kgturn"),h(T,"class","progress-bar svelte-kgturn"),k(T,"width",t[21](t[60])+"%"),h(U,"class","project-summary"),h(W,"class","delete"),h(e,"class","project")},m(t,a){l(t,e,a),r(e,n),r(n,o),r(n,i),r(n,c),r(e,g),r(e,m),r(m,y),r(e,v),r(e,j),r(j,b),r(j,$),r(e,w),r(e,D),r(D,x),r(D,I),r(I,P),r(e,E),r(e,S),r(S,N),r(S,L),r(e,O),r(e,T),r(T,C),r(T,A);for(let t=0;t<at.length;t+=1)at[t]&&at[t].m(T,null);r(e,M),r(e,U),r(U,z),r(z,K),r(U,G);for(let t=0;t<dt.length;t+=1)dt[t]&&dt[t].m(U,null);r(e,J),r(e,W),r(W,q),r(e,B),R||(Z=f(W,"click",ut),R=!0)},p(e,n){if(t=e,512&n[0]&&V!==(V=t[60].name+"")&&_(o,V),512&n[0]&&Y!==(Y=t[60].user_id+"")&&_(c,Y),512&n[0]&&Q!==(Q=t[60].description+"")&&_(y,Q),512&n[0]&&tt!==(tt=t[60].kpi+"")&&_($,tt),512&n[0]&&nt!==(nt="★".repeat(t[60].difficulty)+"")&&_(P,nt),512&n[0]&&ot!==(ot=t[23](t[60].due_date)+"")&&_(L,ot),512&n[0]&&it!==(it=t[21](t[60])+"")&&_(C,it),2097664&n[0]){let e;for(lt=Array(10),e=0;e<lt.length;e+=1){const o=F(t,lt,e);at[e]?at[e].p(o,n):(at[e]=X(o),at[e].c(),at[e].m(T,null))}for(;e<at.length;e+=1)at[e].d(1);at.length=lt.length}if(512&n[0]&&k(T,"width",t[21](t[60])+"%"),32&n[0]&&ct!==(ct=t[5].packsSummary+"")&&_(K,ct),544&n[0]){let e;for(st=t[60].packs,e=0;e<st.length;e+=1){const o=H(t,st,e);dt[e]?dt[e].p(o,n):(dt[e]=et(o),dt[e].c(),dt[e].m(U,null))}for(;e<dt.length;e+=1)dt[e].d(1);dt.length=st.length}32&n[0]&&rt!==(rt=t[5].delete+"")&&_(q,rt)},d(t){t&&a(e),s(at,t),s(dt,t),R=!1,Z()}}}function ot(t){let e,n,i,c,g,k,v,j,b,$,w,D,x,I,P,E,N,L,O,T,C,A,M,U,z,K,J,W,B,H=t[5].createPack+"",R=t[5].addPack+"",F=t[5].existingPacks+"",Z=t[9],V=[];for(let e=0;e<Z.length;e+=1)V[e]=it(q(t,Z,e));let Y=t[8],Q=[];for(let e=0;e<Y.length;e+=1)Q[e]=lt(G(t,Y,e));return{c(){e=d("h2"),n=u(H),i=p(),c=d("select");for(let t=0;t<V.length;t+=1)V[t].c();g=p(),k=d("input"),j=p(),b=d("input"),w=p(),D=d("input"),I=p(),P=d("input"),N=p(),L=d("input"),T=p(),C=d("button"),A=u(R),M=p(),U=d("h2"),z=u(F),K=p(),J=d("div");for(let t=0;t<Q.length;t+=1)Q[t].c();void 0===t[7].project_id&&S((()=>t[36].call(c))),h(k,"type","text"),h(k,"placeholder",v=t[5].planDescription),h(k,"maxlength","300"),h(b,"type","text"),h(b,"placeholder",$=t[5].doDescription),h(b,"maxlength","300"),h(D,"type","text"),h(D,"placeholder",x=t[5].checkDescription),h(D,"maxlength","300"),h(P,"type","text"),h(P,"placeholder",E=t[5].actDescription),h(P,"maxlength","300"),h(L,"type","datetime-local"),h(L,"placeholder",O=t[5].packDueDate),h(J,"class","pack-list")},m(o,a){l(o,e,a),r(e,n),l(o,i,a),l(o,c,a);for(let t=0;t<V.length;t+=1)V[t]&&V[t].m(c,null);y(c,t[7].project_id,!0),l(o,g,a),l(o,k,a),m(k,t[7].plan_description),l(o,j,a),l(o,b,a),m(b,t[7].do_description),l(o,w,a),l(o,D,a),m(D,t[7].check_description),l(o,I,a),l(o,P,a),m(P,t[7].act_description),l(o,N,a),l(o,L,a),m(L,t[7].due_date),l(o,T,a),l(o,C,a),r(C,A),l(o,M,a),l(o,U,a),r(U,z),l(o,K,a),l(o,J,a);for(let t=0;t<Q.length;t+=1)Q[t]&&Q[t].m(J,null);W||(B=[f(c,"change",t[36]),f(k,"input",t[37]),f(b,"input",t[38]),f(D,"input",t[39]),f(P,"input",t[40]),f(L,"input",t[41]),f(L,"change",t[18]),f(C,"click",t[19])],W=!0)},p(t,e){if(32&e[0]&&H!==(H=t[5].createPack+"")&&_(n,H),512&e[0]){let n;for(Z=t[9],n=0;n<Z.length;n+=1){const o=q(t,Z,n);V[n]?V[n].p(o,e):(V[n]=it(o),V[n].c(),V[n].m(c,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Z.length}if(640&e[0]&&y(c,t[7].project_id),32&e[0]&&v!==(v=t[5].planDescription)&&h(k,"placeholder",v),640&e[0]&&k.value!==t[7].plan_description&&m(k,t[7].plan_description),32&e[0]&&$!==($=t[5].doDescription)&&h(b,"placeholder",$),640&e[0]&&b.value!==t[7].do_description&&m(b,t[7].do_description),32&e[0]&&x!==(x=t[5].checkDescription)&&h(D,"placeholder",x),640&e[0]&&D.value!==t[7].check_description&&m(D,t[7].check_description),32&e[0]&&E!==(E=t[5].actDescription)&&h(P,"placeholder",E),640&e[0]&&P.value!==t[7].act_description&&m(P,t[7].act_description),32&e[0]&&O!==(O=t[5].packDueDate)&&h(L,"placeholder",O),640&e[0]&&m(L,t[7].due_date),32&e[0]&&R!==(R=t[5].addPack+"")&&_(A,R),32&e[0]&&F!==(F=t[5].existingPacks+"")&&_(z,F),85066025&e[0]){let n;for(Y=t[8],n=0;n<Y.length;n+=1){const o=G(t,Y,n);Q[n]?Q[n].p(o,e):(Q[n]=lt(o),Q[n].c(),Q[n].m(J,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=Y.length}},d(t){t&&a(e),t&&a(i),t&&a(c),s(V,t),t&&a(g),t&&a(k),t&&a(j),t&&a(b),t&&a(w),t&&a(D),t&&a(I),t&&a(P),t&&a(N),t&&a(L),t&&a(T),t&&a(C),t&&a(M),t&&a(U),t&&a(K),t&&a(J),s(Q,t),W=!1,o(B)}}}function it(t){let e,n,o,i=t[60].name+"";return{c(){e=d("option"),n=u(i),e.__value=o=t[60].id,e.value=e.__value},m(t,o){l(t,e,o),r(e,n)},p(t,c){512&c[0]&&i!==(i=t[60].name+"")&&_(n,i),512&c[0]&&o!==(o=t[60].id)&&(e.__value=o,e.value=e.__value)},d(t){t&&a(e)}}}function ct(t){let e,n,o,i,c,s,f=t[69].description+"",g="★".repeat(t[69].stars)+"";return{c(){e=d("a"),n=u(f),i=p(),c=d("span"),s=u(g),h(e,"href",o=t[69].url),h(e,"target","_blank"),h(c,"class","stars svelte-kgturn")},m(t,o){l(t,e,o),r(e,n),l(t,i,o),l(t,c,o),r(c,s)},p(t,i){256&i[0]&&f!==(f=t[69].description+"")&&_(n,f),256&i[0]&&o!==(o=t[69].url)&&h(e,"href",o),256&i[0]&&g!==(g="★".repeat(t[69].stars)+"")&&_(s,g)},d(t){t&&a(e),t&&a(i),t&&a(c)}}}function rt(t){let e,n,c,g,y,j,b,$,w,D,x,I,P,E,S,N,L,O,T,C,A,M,U,z,K,G,J,q,B=t[5].done+"",H=t[5][t[66]]+"",R=t[63][`${t[66]}_description`]+"",F=t[5].addLink+"",Z=t[0]?"▲":"▼",V=t[5].addLink+"";function Y(){return t[42](t[63],t[66])}let Q=t[63][t[66]].links||[],X=[];for(let e=0;e<Q.length;e+=1)X[e]=ct(W(t,Q,e));return{c(){e=d("div"),n=d("button"),c=u(B),g=p(),y=d("p"),j=u(H),b=u(": "),$=u(R),w=p();for(let t=0;t<X.length;t+=1)X[t].c();D=p(),x=d("div"),I=d("button"),P=u(F),E=p(),S=u(Z),N=p(),L=d("div"),O=d("form"),T=d("input"),A=p(),M=d("input"),z=p(),K=d("button"),G=u(V),h(I,"class","link-create-mode"),h(T,"type","text"),h(T,"placeholder",C=t[5].linkURL),h(T,"minlength","1"),h(T,"maxlength","300"),h(M,"type","text"),h(M,"placeholder",U=t[5].linkDescription),h(M,"minlength","1"),h(M,"maxlength","300"),h(K,"type","submit"),h(L,"class","link-form"),k(L,"display",t[0]?"block":"none"),h(x,"class","link-add svelte-kgturn"),h(e,"class","svelte-kgturn"),v(e,"done",t[63][`${t[66]}_done`])},m(o,a){l(o,e,a),r(e,n),r(n,c),r(e,g),r(e,y),r(y,j),r(y,b),r(y,$),r(e,w);for(let t=0;t<X.length;t+=1)X[t]&&X[t].m(e,null);var s;r(e,D),r(e,x),r(x,I),r(I,P),r(I,E),r(I,S),r(x,N),r(x,L),r(L,O),r(O,T),m(T,t[3].url),r(O,A),r(O,M),m(M,t[3].description),r(O,z),r(O,K),r(K,G),J||(q=[f(n,"click",Y),f(I,"click",t[43]),f(T,"input",t[44]),f(M,"input",t[45]),f(O,"submit",(s=function(){i(t[17](t[63].id,t[66]))&&t[17](t[63].id,t[66]).apply(this,arguments)},function(t){return t.preventDefault(),s.call(this,t)}))],J=!0)},p(n,o){if(t=n,32&o[0]&&B!==(B=t[5].done+"")&&_(c,B),32&o[0]&&H!==(H=t[5][t[66]]+"")&&_(j,H),256&o[0]&&R!==(R=t[63][`${t[66]}_description`]+"")&&_($,R),256&o[0]){let n;for(Q=t[63][t[66]].links||[],n=0;n<Q.length;n+=1){const i=W(t,Q,n);X[n]?X[n].p(i,o):(X[n]=ct(i),X[n].c(),X[n].m(e,D))}for(;n<X.length;n+=1)X[n].d(1);X.length=Q.length}32&o[0]&&F!==(F=t[5].addLink+"")&&_(P,F),1&o[0]&&Z!==(Z=t[0]?"▲":"▼")&&_(S,Z),32&o[0]&&C!==(C=t[5].linkURL)&&h(T,"placeholder",C),8&o[0]&&T.value!==t[3].url&&m(T,t[3].url),32&o[0]&&U!==(U=t[5].linkDescription)&&h(M,"placeholder",U),8&o[0]&&M.value!==t[3].description&&m(M,t[3].description),32&o[0]&&V!==(V=t[5].addLink+"")&&_(G,V),1&o[0]&&k(L,"display",t[0]?"block":"none"),256&o[0]&&v(e,"done",t[63][`${t[66]}_done`])},d(t){t&&a(e),s(X,t),J=!1,o(q)}}}function lt(t){let e,n,o,i,c,g,m,k,y,v,j=t[24](t[63].project_id)+"",b=t[5].delete+"",$=["plan","do","check","act"],w=[];for(let e=0;e<4;e+=1)w[e]=rt(J(t,$,e));function D(){return t[46](t[63])}return{c(){e=d("div"),n=d("h3"),o=u(j),i=p();for(let t=0;t<4;t+=1)w[t].c();c=p(),g=d("button"),m=u(b),k=p(),h(e,"class","pack")},m(t,a){l(t,e,a),r(e,n),r(n,o),r(e,i);for(let t=0;t<4;t+=1)w[t]&&w[t].m(e,null);r(e,c),r(e,g),r(g,m),r(e,k),y||(v=f(g,"click",D),y=!0)},p(n,i){if(t=n,256&i[0]&&j!==(j=t[24](t[63].project_id)+"")&&_(o,j),1179945&i[0]){let n;for($=["plan","do","check","act"],n=0;n<4;n+=1){const o=J(t,$,n);w[n]?w[n].p(o,i):(w[n]=rt(o),w[n].c(),w[n].m(e,c))}for(;n<4;n+=1)w[n].d(1)}32&i[0]&&b!==(b=t[5].delete+"")&&_(m,b)},d(t){t&&a(e),s(w,t),y=!1,v()}}}function at(t){let e,n,o,i,c=t[5].progress+"",f=t[9],g=[];for(let e=0;e<f.length;e+=1)g[e]=st(K(t,f,e));return{c(){e=d("h2"),n=u(c),o=p(),i=d("div");for(let t=0;t<g.length;t+=1)g[t].c();h(i,"class","progress")},m(t,c){l(t,e,c),r(e,n),l(t,o,c),l(t,i,c);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(i,null)},p(t,e){if(32&e[0]&&c!==(c=t[5].progress+"")&&_(n,c),2097664&e[0]){let n;for(f=t[9],n=0;n<f.length;n+=1){const o=K(t,f,n);g[n]?g[n].p(o,e):(g[n]=st(o),g[n].c(),g[n].m(i,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=f.length}},d(t){t&&a(e),t&&a(o),t&&a(i),s(g,t)}}}function st(t){let e,n,o,i,c,s,f,g,m,k,y,v=t[60].name+"",j=t[21](t[60])+"";return{c(){e=d("div"),n=d("h3"),o=u(v),i=p(),c=d("progress"),f=p(),g=d("div"),m=u(j),k=u("%"),y=p(),h(c,"max","100"),c.value=s=t[21](t[60]),h(e,"class","progress-item")},m(t,a){l(t,e,a),r(e,n),r(n,o),r(e,i),r(e,c),r(e,f),r(e,g),r(g,m),r(g,k),r(e,y)},p(t,e){512&e[0]&&v!==(v=t[60].name+"")&&_(o,v),512&e[0]&&s!==(s=t[21](t[60]))&&(c.value=s),512&e[0]&&j!==(j=t[21](t[60])+"")&&_(m,j)},d(t){t&&a(e)}}}function dt(e){let n,i,c,s,h,g,m,k,y,v,j,b,$,w,D,x,I,P,E,S,N,L,O,T,C,A,M,U=e[5].projectManagement+"",z=e[5].packManagement+"",K=e[5].progressManagement+"";function G(t,e){return"Logged in"===t[1]?V:Z}let J=G(e),W=J(e),q="projects"===e[4]&&Y(e),B="packs"===e[4]&&ot(e),H="progress"===e[4]&&at(e);return{c(){n=d("header"),i=d("button"),i.textContent="Test create project",c=p(),s=d("button"),s.textContent="Test create pack",h=p(),g=d("button"),g.textContent="Test create link",m=p(),k=d("button"),k.textContent="initializeDatabase",y=p(),W.c(),v=u("\nauth_login_result: "),j=u(e[1]),b=p(),$=d("nav"),w=d("button"),D=u(U),x=p(),I=d("button"),P=u(z),E=p(),S=d("button"),N=u(K),L=p(),q&&q.c(),O=p(),B&&B.c(),T=p(),H&&H.c(),C=u("")},m(t,o){l(t,n,o),r(n,i),r(n,c),r(n,s),r(n,h),r(n,g),r(n,m),r(n,k),r(n,y),W.m(n,null),r(n,v),r(n,j),l(t,b,o),l(t,$,o),r($,w),r(w,D),r($,x),r($,I),r(I,P),r($,E),r($,S),r(S,N),l(t,L,o),q&&q.m(t,o),l(t,O,o),B&&B.m(t,o),l(t,T,o),H&&H.m(t,o),l(t,C,o),A||(M=[f(i,"click",e[10]),f(s,"click",e[11]),f(g,"click",e[12]),f(k,"click",ft),f(w,"click",e[27]),f(I,"click",e[28]),f(S,"click",e[29])],A=!0)},p(t,e){J===(J=G(t))&&W?W.p(t,e):(W.d(1),W=J(t),W&&(W.c(),W.m(n,v))),2&e[0]&&_(j,t[1]),32&e[0]&&U!==(U=t[5].projectManagement+"")&&_(D,U),32&e[0]&&z!==(z=t[5].packManagement+"")&&_(P,z),32&e[0]&&K!==(K=t[5].progressManagement+"")&&_(N,K),"projects"===t[4]?q?q.p(t,e):(q=Y(t),q.c(),q.m(O.parentNode,O)):q&&(q.d(1),q=null),"packs"===t[4]?B?B.p(t,e):(B=ot(t),B.c(),B.m(T.parentNode,T)):B&&(B.d(1),B=null),"progress"===t[4]?H?H.p(t,e):(H=at(t),H.c(),H.m(C.parentNode,C)):H&&(H.d(1),H=null)},i:t,o:t,d(t){t&&a(n),W.d(),t&&a(b),t&&a($),t&&a(L),q&&q.d(t),t&&a(O),B&&B.d(t),t&&a(T),H&&H.d(t),t&&a(C),A=!1,o(M)}}}let ut="http://localhost:8000";function pt(t){return new Date(t).toISOString()}async function ft(){try{const t=await fetch(ut+"/init_db",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"init"})}),e=await t.json();console.log("Database initialized:",e)}catch(t){console.error("Error initializing database:",t)}}function ht(t,e,n){let o=!1;let i=[];const c={validateUser:t=>{const e=[];return/^[a-zA-Z0-9_-]{28}$/.test(t)||e.push("Invalid UID format"),e},validateProject:t=>{const e=[];return("string"!=typeof t.name||t.name.length<1||t.name.length>50)&&e.push("Invalid project name"),("string"!=typeof t.description||t.description.length<1||t.description.length>300)&&e.push("Invalid project description"),(!Number.isInteger(t.kpi)||t.kpi<0||t.kpi>100)&&e.push("Invalid project KPI"),isNaN(Date.parse(t.due_date))&&e.push("Invalid project due date"),(!Number.isInteger(t.difficulty)||t.difficulty<1||t.difficulty>5)&&e.push("Invalid project difficulty"),e},validatePack:t=>{const e=[];("string"!=typeof t.plan_description||t.plan_description.length<1||t.plan_description.length>300)&&e.push("Invalid plan description"),[0,1].includes(t.plan_done)||e.push("Invalid plan done value"),("string"!=typeof t.do_description||t.do_description.length<1||t.do_description.length>300)&&e.push("Invalid do description"),[0,1].includes(t.do_done)||e.push("Invalid do done value"),("string"!=typeof t.check_description||t.check_description.length<1||t.check_description.length>300)&&e.push("Invalid check description"),[0,1].includes(t.check_done)||e.push("Invalid check done value"),("string"!=typeof t.act_description||t.act_description.length<1||t.act_description.length>300)&&e.push("Invalid act description"),[0,1].includes(t.act_done)||e.push("Invalid act done value");return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(t.due_date)||e.push("Invalid pack due date format. Must be ISO 8601 format."),e},validateLink:t=>{const e=[];return("string"!=typeof t.url||t.url.length<1||t.url.length>300||!/^https?:\/\/[^\s$.?#].[^\s]*$/.test(t.url))&&e.push("Invalid URL"),("string"!=typeof t.description||t.description.length<1||t.description.length>300)&&e.push("Invalid link description"),["plan","do","check","act"].includes(t.stage)||e.push("Invalid stage"),e}};let r="Not logged in",l="user1",a=[],s={url:"",description:"",stage:""};firebase.initializeApp({apiKey:"AIzaSyBcOlIDP2KWbJuKM0WeMHNp-WvjTVfLt9Y",authDomain:"p2auth-ea50a.firebaseapp.com",projectId:"p2auth-ea50a",storageBucket:"p2auth-ea50a.appspot.com",messagingSenderId:"796225429484",appId:"1:796225429484:web:ece56ef2fc0be28cd6eac9"});const d=new firebase.auth.GoogleAuthProvider;async function u(){try{const t=await fetch(ut+"/",{method:"GET"});a=await t.json(),n(9,[k,m]=[a.projects_and_packs,a.packs],k,n(8,m))}catch(t){console.error("Error fetching data:",t)}}let p="projects",f={},h={name:"",description:"",kpi:0,due_date:(new Date).toISOString().slice(0,16),difficulty:3},_={project_id:null,plan_description:"",plan_done:0,do_description:"",do_done:0,check_description:"",check_done:0,act_description:"",act_done:0,due_date:(new Date).toISOString().slice(0,16)};let m=[],k=[];function y(t,e){n(8,m=m.map((n=>(n.id===t&&(n[`${e}_done`]=n[`${e}_done`]?0:1),n))));const o=m.find((e=>e.id===t)).project_id,i=b(t);m.find((e=>e.id===t));const c=k.find((t=>t.id===o));if(c.packs=c.packs.map((n=>(n.id===t&&(n[`${e}_done`]=n[`${e}_done`]?0:1),n))),100===i){const t=k.find((t=>t.id===o));t.difficulty=Math.max(1,t.difficulty-1)}if(0===i){const t=k.find((t=>t.id===o));t.difficulty=Math.min(5,t.difficulty+1)}}$((async()=>{n(5,f=await(async()=>{const t=await fetch("pdca_lang.json");return await t.json()})()),await u(),await async function(){try{const t=await new Promise(((t,e)=>{firebase.auth().onAuthStateChanged(t,e)}));t?(n(1,r="Logged in"),n(2,l=t.uid)):(n(1,r="Not logged in"),n(2,l="user1"))}catch(t){console.error("Error during authentication:",t),n(1,r="Authentication failed"),n(2,l="")}}()}));const v=t=>n(4,p=t),j=t=>{projects=projects.filter((e=>e.id!==t))},b=t=>{const e=["plan","do","check","act"],n=m.find((e=>e.id===t));return e.filter((t=>n[t].done)).length/e.length*100},w=t=>{n(8,m=m.filter((e=>e.id!==t)))};return(async()=>{})(),[o,r,l,s,p,f,h,_,m,k,function(){n(6,h={name:"Test Project",description:"This is a test project",kpi:50,due_date:(new Date).toISOString().slice(0,16),difficulty:3})},function(){n(7,_=Object.assign(_,{project_id:1,plan_description:"Test Plan",plan_done:0,do_description:"Test Do",do_done:0,check_description:"Test Check",check_done:0,act_description:"Test Act",act_done:0}))},function(){n(3,s={url:"https://www.google.com",description:"Google",stage:"plan"})},async function(){try{const t=(await firebase.auth().signInWithPopup(d)).user;n(1,r=`Logged in as: ${t.displayName}`)}catch(t){console.error("Error during Google login:",t),alert("Google login failed. "+t.message)}},async function(){try{await firebase.auth().signOut(),n(1,r="Not logged in")}catch(t){console.error("Error during sign-out:",t),alert("Sign out failed. "+t.message)}},u,async function(){try{console.log("Creating project:",h),!l&&(i.push("Error creating project: No UID"),console.error("Error creating project: No UID"));const t=c.validateProject(h);if(i.push(...t),i.length>0)return void console.error("Error creating project:",i);const e=await fetch(`${ut}/create_projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h.name,description:h.description,kpi:h.kpi,due_date:pt(h.due_date),difficulty:h.difficulty,uid:l})});if(!e.ok){const t=await e.json();return void console.error("Error creating project:",t.errors)}const n=await e.json();console.log("Project created with ID:",n.id)}catch(t){console.error("Error creating project:",t)}},async function(t,e){try{console.log({pack_id:t,url:s.url,description:s.description,stage:e,uid:l}),console.log("1"),!l&&(()=>{throw new Error("auth_uid is required")})(),console.log("2");const o=c.validateLink(s);console.log("3"),console.log("valid_errors",o),console.log("4"),o.length>0&&(()=>{throw new Error("Error creating link:",o)})(),console.log("5");const i=await fetch(ut+"/create_links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pack_id:t,url:s.url,description:s.description,stage:e,uid:l})});if(!i.ok){console.log("6");const t=await i.json();return void console.error("Error creating link:",t.errors)}const r=await i.json();console.log("Link created with ID:",r.id),n(3,s={url:"",description:"",stage:""})}catch(t){console.log("7"),console.log(t)}},t=>{const e=new Date(t.target.value);n(7,_.due_date=e.toISOString(),_)},async function(){try{await async function(){try{!l&&(i.push("Error creating pack: No UID"),console.error("Error creating pack: No UID"));const t=c.validatePack(_);i.push(...t),!(i.length>0)&&(()=>{throw new Error("Error creating pack:",i)})();const e=await fetch(ut+"/create_packs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:_.project_id,plan_description:_.plan_description,plan_done:_.plan_done,do_description:_.do_description,do_done:_.do_done,check_description:_.check_description,check_done:_.check_done,act_description:_.act_description,act_done:_.act_done,uid:l,due_date:pt(_.due_date)})});if(!e.ok){const t=await e.json();return void console.error("Error creating pack:",t.errors)}const n=await e.json();console.log("Pack created with ID:",n.id)}catch(t){console.error("Error creating pack:",t)}}(),n(8,m=[...m,_]),n(7,_={plan_description:"",plan_done:0,do_description:"",do_done:0,check_description:"",check_done:0,act_description:"",act_done:0,due_date:(t=(new Date).toISOString(),t.slice(0,16))})}catch(t){console.error("Error adding pack:",t)}var t},y,t=>{const e=t.packs,n=e.filter((e=>e.project_id===t.id)).length,o=e.filter((e=>e.project_id===t.id&&e.plan_done&&e.do_done&&e.check_done&&e.act_done)).length;return 0===n?0:Math.round(o/n*100)},v,t=>{const e=new Date;return e.setHours(e.getHours()+t),e.toLocaleString()},t=>{const e=k.find((e=>e.id===t));return e?e.name:""},j,w,()=>v("projects"),()=>v("packs"),()=>v("progress"),function(){h.name=this.value,n(6,h)},function(){h.description=this.value,n(6,h)},function(){h.kpi=g(this.value),n(6,h)},function(){h.due_date=this.value,n(6,h)},function(){h.difficulty=g(this.value),n(6,h)},t=>j(t.id),function(){_.project_id=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(7,_),n(9,k)},function(){_.plan_description=this.value,n(7,_),n(9,k)},function(){_.do_description=this.value,n(7,_),n(9,k)},function(){_.check_description=this.value,n(7,_),n(9,k)},function(){_.act_description=this.value,n(7,_),n(9,k)},function(){_.due_date=this.value,n(7,_),n(9,k)},(t,e)=>y(t.id,e),()=>n(0,o=!o),function(){s.url=this.value,n(3,s)},function(){s.description=this.value,n(3,s)},t=>w(t.id)]}return new class extends z{constructor(t){super(),U(this,t,ht,dt,c,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
